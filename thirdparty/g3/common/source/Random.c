#include <stdbool.h>
#include <stdint.h>
#include <Random.h>
#include <Byte.h>

extern void platform_random_init(void);
extern uint16_t platform_random_16(void);
extern uint32_t platform_random_32(void);

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
void Random_Initialize()
{
  platform_random_init();
}

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
uint16_t Random16(void)
{
  uint16_t u16Random = platform_random_16();
  return u16Random;
}

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
uint16_t Random16Ex(
  uint16_t u16Min,
  uint16_t u16Max
  )
{
  uint16_t u16LocalMin = u16Min;

  if (u16Max < u16Min) {
    u16LocalMin = u16Max;
    u16Max = u16Min;
  }

  return Random16() % (u16Max - u16LocalMin + 1) + u16LocalMin;
}

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
uint32_t Random32(void)
{
  uint32_t u32Random = platform_random_32();
  return u32Random;
}

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
uint32_t Random32Ex(
  uint32_t u32Min,
  uint32_t u32Max
  )
{
  uint32_t u32LocalMin = u32Min;

  if (u32Max < u32Min) {
    u32LocalMin = u32Max;
    u32Max = u32Min;
  }

  return Random32() % (u32Max - u32LocalMin + 1) + u32LocalMin;
}

/**********************************************************************************************************************/
/**
 ***********************************************************************************************************************
 *
 **********************************************************************************************************************/
void Random128(
  uint8_t au8Value[16]
  )
{
  uint16_t u16Rand = 0;
  uint8_t n = 0;

  for (; n < 16; n += 2) {
    u16Rand = Random16Ex(0x0000, 0xFFFF);

    au8Value[n] = Byte_HiByte(u16Rand);
    au8Value[n + 1] = Byte_LoByte(u16Rand);
  }
}
